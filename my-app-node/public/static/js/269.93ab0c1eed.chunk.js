(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[269],{8747:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return i}});var s=a(80129),l=a.n(s),r={data(){return{dialogVisible:!1,form:{name:"",age:"",sex:"",birth:"",addr:""},rules:{name:[{required:!0,message:"请输入姓名"}],age:[{required:!0,message:"请输入年龄"},{type:"number",message:"请输入数字"}],sex:[{required:!0,message:"请输入性别"}],birth:[{required:!0,message:"请输入出生日期"}],addr:[{required:!0,message:"请输入地址"}]},tableData:[],modalType:0,total:0,pageData:{pageNum:1,pageSize:10},userForm:{name:""}}},mounted(){this.getList()},methods:{handleAdd(){this.modalType=0,this.dialogVisible=!0,this.$nextTick((()=>{this.$refs.form.resetFields()}))},submitHandler(){this.$refs.form.validate((e=>{e&&(0===this.modalType?this.$axios.post("/api/users",l().stringify(this.form),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((e=>{console.log(e),this.getList()})):this.$axios.put(`/api/users/${this.form.id}`,l().stringify(this.form)).then((e=>{console.log(e),this.$message.success("数据编辑成功")})).catch((e=>{console.log(e)})),this.getList(),this.handleClose())}))},handleClose(e){this.dialogVisible=!1},cancel(){this.handleClose()},handleEdit(e){this.modalType=1,this.dialogVisible=!0,this.$nextTick((()=>{this.form=JSON.parse(JSON.stringify(e)),this.form.sex=0===Number(this.form.sex)?"男":"女"}))},handleDelete(e){this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.$axios.delete(`/api/users/${e.id}`).then((()=>{this.$message({type:"success",message:"删除成功!"}),this.getList()}))})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},handlePage(e){this.pageData.pageNum=e,this.getList()},onSubmit(){this.getList()},getList(){this.$axios.get("/api/users",{params:{...this.pageData,...this.userForm}}).then((e=>{this.tableData=e.data.list,this.total=e.data.count||0})).catch((e=>{console.log(e)}))}}},i=(0,a(51900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"manage"},[t("div",{staticClass:"manage-header"},[t("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v(" + 新增 ")]),e._v(" "),t("el-form",{attrs:{model:e.userForm,inline:!0}},[t("el-form-item",[t("el-input",{attrs:{placeholder:"请输入名称"},model:{value:e.userForm.name,callback:function(t){e.$set(e.userForm,"name",t)},expression:"userForm.name"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1)],1),e._v(" "),t("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,"before-close":e.handleClose,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"80px",inline:!0}},[t("el-form-item",{attrs:{label:"姓名",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"年龄",prop:"age"}},[t("el-input",{attrs:{placeholder:"请输入年龄"},model:{value:e.form.age,callback:function(t){e.$set(e.form,"age",e._n(t))},expression:"form.age"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"性别",prop:"sex"}},[t("el-select",{attrs:{placeholder:"请选择性别"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[t("el-option",{attrs:{label:"男",value:0}}),e._v(" "),t("el-option",{attrs:{label:"女",value:1}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"日期",prop:"birth"}},[t("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.form.birth,callback:function(t){e.$set(e.form,"birth",t)},expression:"form.birth"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"地址",prop:"addr"}},[t("el-input",{attrs:{placeholder:"请输入地址"},model:{value:e.form.addr,callback:function(t){e.$set(e.form,"addr",t)},expression:"form.addr"}})],1)],1),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.cancel}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.submitHandler}},[e._v("确 定")])],1)],1),e._v(" "),t("div",{staticClass:"common-table"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",height:"90%"}},[t("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"50"}}),e._v(" "),t("el-table-column",{attrs:{prop:"name",label:"姓名",center:""}}),e._v(" "),t("el-table-column",{attrs:{prop:"sex",label:"性别",center:""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(0===Number(a.row.sex)?"男":"女"))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"age",label:"年龄",center:""}}),e._v(" "),t("el-table-column",{attrs:{prop:"birth",label:"出生日期",center:""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(a.row.birth.substr(0,10)))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"addr",label:"地址",center:""}}),e._v(" "),t("el-table-column",{attrs:{prop:"edit",label:"编辑"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(t){return e.handleEdit(a.row)}}},[e._v("编辑")]),e._v(" "),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(a.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),t("div",{staticClass:"pager"},[t("el-pagination",{attrs:{layout:"prev, pager, next",total:e.total},on:{"current-change":e.handlePage}})],1)],1)],1)}),[],!1,null,"3bc43dec",null).exports},24654:function(){}}]);
//# sourceMappingURL=269.93ab0c1eed.chunk.js.map